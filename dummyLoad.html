<!DOCTYPE HTML>

<html>
	<head>
		<title>Wojciech Zurek</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="inner">

							<!-- Logo -->
								<a href="index.html" class="logo">
									<span class="symbol"><img src="images/logo.svg" alt="" /></span><span class="title">Wojciech Zurek</span>
								</a>

							<!-- Nav -->
								<nav>
									<ul>
										<li><a href="#menu">Menu</a></li>
									</ul>
								</nav>

						</div>
					</header>

				<!-- Menu -->
					<nav id="menu">
						<h2>Menu</h2>
						<ul>
							<li><a href="index.html">main page</a></li>
							<li><a href="cpp-index.html">C++</a></li>
							<li><a href="elektronika-index.html">electronics</a></li>
							<li><a href="WojciechZurekCV2024.pdf">curriculum vitae</a></li>
							<li><a href="kontakt.html">contact</a></li>
						</ul>
					</nav>

				<!-- Main -->
					<div id="main">
						<div class="inner">
							<h1>Electronic Dummy Load</h1>
							<h2>Electronic Dummy Load for testing potentiostats and impedance spectrometers</h2>
							<span class="image main"><img src="https://lh3.googleusercontent.com/pw/AJFCJaWN3Zr1MNZdIFR57prX4vY74rFv4QYWny5-ZfouVWPYaOsWvH5mgk28ELQi4vV_fGniEDIcdROr98k3BWxSlPdJL0rHsCm2Vna-ziCm87-HLIPsX-1dH-UwkdOzaORKHt9XzqZqw56hevtJB3QJPRcc=w1204-h903-s-no?authuser=0" alt="" /></span>

							<p>
							The engineering thesis was created based on modern technologies. The designed device has a number of load circuits - from simple R, L, C 
							elements and diodes, through more complex test systems with passive elements and real half-cell simulation systems. Automatic switching of 
							load circuits was implemented using digitally controlled electronic switches. Digital potentiometers were also used. Both of these solutions 
							allow the user to select and modify the circuit via control panel, and the modern touch graphical interface is clear and easy to use. The 
							ability to connect five different connectors significantly improves the quality of work with various devices and increases the comfort of testing.
							</p>
							<p>
							The device is currently used in the laboratory at the faculty of physics at University of Wrocław.
							</p>
							
							<p><b>CONTROL PANEL</b></p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczPQQLssq3f-o9OirRccrHHGb1HvM7-BMoCeL2zfpj5vuuSIZlr4uhKjkXSxDjf6q9SDKMYE7oZc5ZFaxAyCTPVWPckJOh-Guhs1AOBbVIVXzIJ2QtvPaDNQuCEnkHcHBRMy7bm7d_fFf7lnbkZeJl5k=w517-h333-s-no-gm?authuser=0" width="50%" align="center"/>
							</center>
							<p>
							In order to facilitate the operation of the device, it has been planned to use the most popular types of sockets for connecting plugs used in 
							potentiostats and impedance spectrometers. The user can therefore connect via a 2mm diameter banana connector, a 4mm diameter banana connector, 
							BNC plug, alligator clip and eyelet connector. This means that each electrode can be connected in five different ways. In addition, two banana 
							sockets with a diameter of 4mm (with the possibility of connecting an eyelet connector) have been placed, allowing you to connect your own testing 
							circuit. All connectors in the sockets are connected to the PCB and also to each other using eyelet connectors. Each connection socket has its 
							own mounting, for which a hole in the housing has been prepared. Depending on the type of socket, the diameter of the hole is from 2 to 6mm. The 
							exception is the BNC socket, for which four M2.5 screws were used. There is also a 2.8-inch touch screen in the vicinity, which allows you to 
							select the appropriate operating mode and circuit parameters. It is fixed with four M3 screws, the holes of which are recessed for the screw head. 
							Around the mounting hole for the screen there are thin walls covering the edges of the screen and giving it an aesthetic appearance. The 
							descriptions on the front panel were made as recesses created during 3D printing.
							</p>
							
							<p><b>LOAD CIRCUIT BLOCK</b></p>
							<p>
							The block consists of nine specialized circuits switched on by means of electronically controlled switches. Individual load modules allow you 
							to test both impedance spectrometers and potentiostats.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczPXq9ZrHQgjIRE7Dy3vNaS7q7ocDtLu0deemQ95FLp_N0bdoK4x2VDIjnV_93djAX9zx6ABKgOZOLiN8EiQvHGACL0hpCSKiRYdP8N04Qp-NyGj7EIhIpkhozLT9CKjM3msIDF7Xz31X4Kjgd0Nx2Lg=w482-h634-s-no-gm?authuser=0" width="40%" align="center"/>
							</center>
							<br>
							<p><b>
							Examples circuits:
							</b></p>
							<p>
							Randless circuit: (left) schematic diagram with switches, (right) view of the circuit on the control panel.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczMJ0v5ZsNt4_D-cVTIkIUavlZhymKMPwYjHlr0ZyoweJnMh6IxtY69AeP0t8Q-NsqX1F4RwdKvyGtYSHb1HkIBJsGFRxmuDbd4mw7eY_DbBBDVjPst0MK5Mw6kyLhqRQBBCEFDADiFaSefy7Tyciheg=w665-h212-s-no-gm?authuser=0" width="50%" align="center"/>
							</center>
							<br><br>
							<p>
							RC circuit that allows you to create your own configuration. (left) schematic diagram, (right) appearance as shown on the control panel.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczMDMqxQNLJra6t5bFQuGuv50iDnLGYl81o3V9YIN6aF_YWwiHGxbmGRZkeUOeAOt5rBFtOGwV48g_A_QJQbEUFmSPu5U49QDWVISfvuYiQA_AC0WFaeR8Pj5m8PKGS-soFTjMwpHcYFWBSGFlCiagi8=w662-h178-s-no-gm?authuser=0" width="50%" align="center"/>
							</center>

							<p><b>STEERING AND CONTROL SYSTEM</b></p>
							<p>
							The electrical diagram of the control and monitoring circuit together with the connected load circuits is shown in the figure below. 
							The design of the electronic circuits was implemented in the EasyEDA program
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczNHWe1Bcc61GV_7lxqHzpjsnwZtq-G59OY0HQNCZO8NWnVML25-dalGp_qHMTAU2c5mqtnBE5dNJXHMexlhguBDF0Ejsff65LE8ee0uUNtVypqxIXsSh-KdgnVqlodk94ZVNRxBmPbm-fJs_jwPro8J=w548-h745-s-no-gm?authuser=0" width="50%" align="center"/>
							</center>
							<p>
							The diagram shows the main components of the project. These are: <br>
							•	digital switches (MAX395EAG+, marked in purple);	<br>
							•	digital potentiometers (marked in yellow);	<br>
							•	load circuits (marked in red);	<br>
							•	microcontroller responsible for setup and controlling the operation of the system, including communication with the user's graphic control panel 
							(marked in blue).	<br>
							</p>
							<p>
							The steering and control system performs the following tasks:	<br>
							•	related to the switching of measuring circuits (switch section S01-S08); <br>
							•	allows the user to connect an external dummy load circuit (switch S09);	<br>
							•	allows to configure load circuits by switching on and off individual components; 	<br>
							•	controls the value change of selected resistors;	<br>
							•	communicates with the control panel through which the user configures the device.  <br>
							</p>
							<p>
							Circuit switching systems were implemented using the MAX395EAG+ system. It is an 8-channel analog circuit with single-pole, single-throw switches. 
							It has eight independently controlled tracks. The switches are designed to carry current in both directions, so they can be used for alternating 
							signals. The pin configuration of the MAX395EAG+ is shown in the figure below.
							</P>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczPp9OczMGhzZyvgRV194zwTR5a9FTB-30mNPiuH3kl2_fAOJgethUGzMwvYAgyaCiPPPOmCY4MYQ3xJXdsr_3EEiv1aEyZdLtK5C290KhvQ5cuy0WfVac0Rv8roNceJZquPkrXj9jO_2MrssH2edPns=w344-h335-s-no-gm?authuser=0" width="20%" align="center"/>
							</center>
							<p>
							Originally, it was planned to use the ADG715BRUZ-REEL7 switching chip, whose track resistance was in the order of a mile Ohms. Ultimately, however, 
							the waiting time for the order from the manufacturer was too long and the entire system, including the printed circuit board, had to be designed 
							and made for the available component.
							</p>
							<p>
							The change in the value of the resistors was made based on the Microchip MCP4251 series. These are digital 8-bit resistors adjustable in 257 
							steps (256 switching possibilities between 257 internal resistors). They operate on the basis of a resistor ladder, the individual sections of 
							which are connected via internal switches.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczObcXau5vdspV0n327ZWCb5WeKVC5-g3Egvj1dPXPjubS0dYw7KVnf4vp75mPQd5Ek8GUIpIzaOAfFB8mIZ1q9fq9hD9b5TUUO1SpvRWhpmAStXilmOW3b8uEpwJQPUjYLhN4FiOT8t8ULbqPjBD-JH=w837-h507-s-no-gm?authuser=0" width="50%" align="center"/>
							</center>
							<p>
							For communication, they use the SPI interface, thanks to which the resistance value can be easily changed. The connection of the resistor pins to 
							the microcontroller is the same as for digital switches. All circuits used for the engineering work belong to one series, but they differ in nominal 
							resistance: 5 kΩ, 10 kΩ, 50 kΩ, 100 kΩ. The available systems contain one or two potentiometers in the case, which greatly facilitates their 
							placement on the PCB.
							</p>
							<p>
							The heart of the control and monitoring system is the microcontroller located on the Arduino nano platform. It plays a superior role in the system, 
							as it communicates with individual components and provides them with information sent from the control panel. Information from the user is sent via 
							SPI transfer to digital switches or resistors. The data goes to each element connected to the microcontroller, but a specific recipient is selected 
							by changing the connection state from high to low. The recipient's data is also included in the information sent to the microcontroller and thanks 
							to this, it is known in which connection the state should be changed. Other elements that are held high ignore the data bits supplied to them. After 
							the data transfer is completed, all connections are set to high.
							</p>
							<p>
							The microcontroller has an ATmega 328 processor powered by 5V DC. It has 32 kB of flash memory which is used to store the dummy 
							load resource control program for spectrometer and potentiostat testing. ATmega is connected with the control panel via serial 
							communication pins Rx and Tx. This allows to send and receive information sent by the HMI panel controller. The microcontroller is also 
							connected directly to each switch and digital resistor. It uses 10 pins, which are used for SPI communication with individual load circuit 
							or are directly controlled from the microcontroller.
							</p>
							<p>
							Nextion NX3224T028 HMI control panel has TFT matrixes and uses only one serial port for communication. It was created to avoid the hassle of wiring. 
							It has pins for connecting the power supply (+5V and GND) and those that allow communication via a serial port implemented in TTL technology 
							(Rx and Tx). Thanks to this solution, the microcontroller (or other connected device) can easily receive and send data to the screen using a 
							simple ASCII code. The display is programmed using a computer application created by the manufacturer. Each slide and each interactive element 
							has a separate code file. The application has a "drag and drop" mode, which greatly facilitates programming and creating visualizations.
							</p>


							<p><b>SOFTWARE FOR CONTROL PANEL</b></p>
							<p>
							For the device to function properly, its components must communicate with each other properly. Between the microcontroller and the touch screen, 
							this happens via the UART interface. However, SPI is behind the communication between the microcontroller and potentiometers and switches.
							</p>
							<p>
							The microcontroller software was written in the Arduino IDE environment using the C/C++ language. Each program in this environment consists of 
							a setup() function that is executed at the start of the program, followed by a loop() function that executes in a loop. The SPI.h library was 
							used in the implementation of the program.
							</p>
							<!--<p>
							Part of code implementation below.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/fife/APg5EOaHq9vF8lYxmWpg3PLA_bkeuMUaJds7ivR8cBBTpYPNt9sEknP--YByexskC25z5HjSf6TpY1bqLZOFYQz5h_m7EuAN8AC8KrDZZDcMviQSf272QF5VnS1eC8BKJ9P9TXPbLrnst82l7JdjtIi3FXX7O4GyBwDcl4HLqIXRuWdHTJqCjtobGaN0ETbxO5EefHt3QNfETBwfr22r8QwW8HDrmE78nPc6-YPLzcKjefvbyWXoXu_H9J0BU6XDLr-v05zkfq8FKf9UBZpoxYy41taXT8Yalw_ye38UPUaECurb7hoNVDIikD1bosH2BiTDBh0yNKPZXEJEHMxgdUwzOwyMUW_BnmGfjJliCJO4rMvnFEP2GyejksNfNADGpDf4EaiinELNPq8xRF3a8LpNKXxuyUt5ZvvOX6TSfuSFyKvtSvnpAdA4qLYdBgaE3uMUaEfz_KHfuTFIBIZVVMR5jDZ1W1wT4XUOCkhVxwYo85LUPLvUl3ErrMOtq93-WWvRuxiZey7lp2cYfcb8FD_07uDi2k_97dPGdXt0RNBixVmjp9JEEWEGuydA9y1FMmZ0vfpRqxJ05H--_dl8hhHziTNONIzPi5g38cjv487whzLjLwOOBSsBb58zyH8ipMs5Yql5MlAuwYBlqqtVTg-mMXogDfJPVFHFW2Dq0o95qpKuKAkhre2z8M-qDxkBfYnPTVrVYYNpLco7PvDpfdxoEtTHtTgNVs_9UL72kEhojC7gbL07PCIRjwS77yYQICw0drvkXVjlcGzZuhrf9KJ4mFAf15BJL-tlLwilJVW7pRKbBiFRWypNsOm3a4R8c0eBpIarj5-m1ERjSLYYO_8InvCv5fgEYVWXqWZkrEwMoVcOuU5LFzxaDr7mfyMikSWPlRn9hRXM3PWgGiuxwzbdy6Dt3TSkdq6OMSbMDMPOA9dWfuw09O81Zj11aPTEUcajwsXXhTElVJMIcU07Z8hm55Tue1_ajXvA1v0XagS02YJHL3y01jSU7fwuNGbrLDtIpW7vvLu1PpmGC6GdQk940zAJQStI0DVUtJKdaoW9Ffb8PgZw2MCaddC9_81oBhPcYRhiJKVPxsvAbOtW7W4f73uVTFr4z0eHDIj7UvljUtHRYhlJJxpvRjwsF1YTlyKkbheP0iyayuXmv9S7oX_RwQfrIyATuWA2bXILx7B1iGQWB_WqbPPRpT7eIKI3LJ23LL5mpV1Ujw62vCgATCghWQSkAfkYGO_pWzN-hFNv0xxYLwCqo-NPjv9G5jyCBSm0y0aP6ZYPtVJQg5PvVGC6HaRTRPksNUNBTmLyiWyHhhNU2_V-m4SdOHrbsEZINqsA7tDBMytQsbqbEO4bx91iPI6EvOY8MMXfTRebtRV8Jj2Zr9QsbTH64pwYmYkFsst12Z9OgfSA-XOdMUHzmgdXPetK94Pnebbx0iXp9bToxuzs7aqOH5XNrfMBtWVHA5sx9jkOVmwOXoFhfwhtCthDOmiYlX8hpys0pUxcnq7H-Am3QHC9am7YlOieCGSLj7hvAARQ-DfVrOTsj3BtjcsUxO0cjDStQ1UF57OHh0BZiHEHRPMHqTi_EFkVcqtDsp_eW04uAzzCB7qw4CnyLdPi2AFOG8TTp0Dpnbymz9atw7Vj0k77Rg2ULYFRmJQS5jJOZ6mKxxPHKBvB_h-bQNlpWyVgyw_uyqYUC-oaHrzdHhiXajfd2JYoeF6FwITo_dQbTXMMiyyXWom9q28QLTaf6B9nWeI67Nu4Pvnxoa0k-AJCNAtXtGsZkdRx40qBCNpwmcGtk7I6sUZqwdhDc-yE4lzmpC0uNXLXb8YJr_ahB0_qrvPzgB7A9RbmXBwh2GjBc4nAxpkkfeynQ5hqt4cLun7qQiGDFmqd39LxfA2XsOXd5X9__a0uRI27s2-gbYyNqiExNv1J5PTMYimOWVNqhGbaFsWdXvBdf0O6KYUFLSCNFkBbBlQ=s1027-w1027-h567-s-no?authuser=0" width="100%" align="center"/>
							</center><br>	--->
							<p>
							The control panel software was designed in the Nextion Editor environment. It is a special computer program that allows to create software for 
							dedicated devices. This program is a combination of a text programming environment and a graphic editor. Each slide is programmed separately 
							and uses a special language created by the creators of the control panel.
							</p>
							<p>
							Each element (button, slider, link, image) has parameters such as name, position on the slide, value, size, color, as well as a function that 
							defines its behavior.
							</p>
							<p>
							After launching the control panel, the main slide is displayed. With the help of successively pressed buttons, the slides are changed, the 
							selected circuits for testing are displayed, and the appropriate data is sent to the microcontroller. When the return button is pressed, a 
							signal is sent causing all switch and resistor values to be reset to default.
							</p>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczMicZ-AAQc2hoAmQEYxYOVCZR4ik6oRTRoOGWDDtU72yg2mPH1pWQZCLLRXn64w-Mk3O_ZCt3efx2JAn-jn3Fxlf1vhcCIMnI8AJbi4cG6uSvgumsR-zpVbjJ4gblwdvuM8UMQkir4cEgBNdsf32lus=w1819-h977-s-no-gm?authuser=0" width="100%" align="center"/>
							<br><br><br>

							<p><b>POWER SUPPLY CIRCUIT</b></p>
							<p>
							The device has been designed with its own power supply. It is a linear power supply that 
							allows to supply power to the control and monitoring system and the control panel with a voltage of 5V.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczMUWi2uNXXzPz6k6GrNdL9IljeQtOC9BBezk_ylw_j_UR3V7hlSjzZvwoikfuM9KcIxGWw9IhDJe4lIRalbOOm9Cm9rei4hODYTkjLPlskBygYCOjAB2PJkLliXHNOBrIhZ6-Mhhn5G4TUs-lwhR8jT=w605-h180-s-no-gm?authuser=0" width="70%" align="center"/>
							</center>
							<p>
							The power supply uses an 8.5V AC transformer. It allows to deliver 500mA to the receiver. The voltage from the transformer was fed to the rectifying 
							bridge through fuses with a nominal value of 1A (F1 and F2). Special sockets are soldered on the PCB, which allow for quick and easy replacement 
							in the event of any of them tripping. Voltage stabilization was based on the LM317 chip. The task of this system is to maintain a constant voltage, 
							regardless of supply voltage fluctuations and system load changes.
							</p>
							<p>
							Peak-to-peak voltage measurements showed that the ripple is less than 200 mV, which is normal and will not interfere with any component.
							</p>
							
							<p><b>MAKING THE DEVICE</b></p>
							<p>
							For the physical implementation of the system, was used a two-layer printed circuit with dimensions of 10/15 cm. The layout was designed in 
							EasyEDA Designer. The EasyEDA package is an online toolkit that allows you to design circuits and boards along with their visualization.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczNoFZT6i-DJHsZsxYM3wZy6n_I5lKqkHe7-iRIS5HXjfBAWc8pef5uslaBytUrt8VMBBkplb0Yd-EMMP4vgOaShlDwh0IFXubO7XctYTlssfzRALQ57sYDj6mooh9zYKIedIysqm_BuOWo-pzkIPXxp=w811-h567-s-no-gm?authuser=0" width="50%" align="center"/>
							</center>
							<p>
							The connection circuits and the power supply system are placed on the PCB, with the separation of the high and low voltage parts. Two rows 
							of goldpin connectors allow to connect the Arduino Nano module with the AVR ATmega 328 microcontroller that controls digital switches and 
							resistors. All circuits, except the capacitive circuit and diodes, were made in SMD technology.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczOaR2Re9JbdEi_UWZE3b9pnFYRO5G5ULI4TG2RsqMQpHVf5GTWVoGyCo7QT1ejpOI9OCZBC1IP_REgGysBc-3cDqBVVI4OjQDU3XbkBrqrswPnUeDte1Yfo8nQ4PF0CmuqlNRFHi9VRLtQjPc0HorQI=w1204-h903-s-no-gm?authuser=0" width="70%" align="center"/>
							</center>
							<p>
							The case of the device was designed in the Fusion 360 program and printed with 3D printer technology using filament PLA and PET-G.
							</p>
							<center>
							<img src="https://lh3.googleusercontent.com/pw/AP1GczNL0ne25CWHOSIDIedhf88R1WTlAzQrKS4IKYeKodL2nlCcTniqu5MrFEhO8ryY72d0x5dRYC4RNl6qN1lFlIiOvs_CFPzaGr4PJ8bvIOZuXInIQUGEW023JqouSkQwnJdUduOQ4dvkbbcCCkFWHBHk=w731-h732-s-no-gm?authuser=0" width="40%" align="center"/>
							</center>
							<p>
							The 3D printing technology used to print the case is FDM. It consists in laying layer by layer of a thermoplastic material in the form of a line, 
							i.e. a filament. This material is first heated in the extruder and then placed by the head. When creating the engineering thesis, PLA and PET-G 
							filaments were chosen due to the ease of printing and the possibility of printing in an open chamber. These materials do not need a high printing 
							temperature (210ºC for PLA and 220ºC for PET-G) and have high durability. The print was made using the Ender 3 printer, which can print elements 
							with maximum dimensions of 220/220/250 mm.
							</p>

							<p><b>TESTING</b></p>
							<p>
							In order to check the correct operation of the device, after its construction, tests of switches, potentiometers, power supply, software with a 
							microcontroller and display were carried out. Before assembling the components in the case, the control panel was checked. It was connected to 
							a microcontroller, and the microcontroller to a PC, which showed the information received by the microcontroller from the user. After building the 
							device, the first thing to check was the power supply and the related voltage stabilization. Oscilloscope was connected to the stabilizer system
							terminals. Then, using the potentiometer marked as R2, the voltage was adjusted output to 5V. The oscilloscope indications showed that the voltage 
							in the system is stable. Then the multimeter operating in the ohmmeter mode was connected to the terminals of switches and potentiometers. Each time 
							it was connected to the switch, it was switched to closed and open mode by means of the control panel. In the case of potentiometers, resistance values 
							were changed on the control panel. After each change made on the panel, the value from the multimeter was read. It also allowed to check the correct 
							operation of the software. The final test was on connecting 3V DC voltage to the electrode terminals with an ammeter and checking the current 
							consumption. The device was also tested using an impedance spectrometer and a potentiostat.
							</p>
							<p>
							*schematic diagram MAX395EAG+ are from distributor website -> mouser.pl/datasheet/2/256/MAX395-1292250.pdf
							<br>*schematic diagram of digital potentiometers MCP are from manufacturer website -> microchip.com/en-us/product/MCP4251
							</P>
						</div>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>